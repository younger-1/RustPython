---
source: crates/codegen/src/compile.rs
expression: "compile_exec(\"\\\nasync def test():\n    for stop_exc in (StopIteration('spam'), StopAsyncIteration('ham')):\n        with self.subTest(type=type(stop_exc)):\n            try:\n                async with egg():\n                    raise stop_exc\n            except Exception as ex:\n                self.assertIs(ex, stop_exc)\n            else:\n                self.fail(f'{stop_exc} was suppressed')\n\")"
---
  1           0 RESUME               (0)

  3           1 LOAD_CONST           (<code object test at ??? file "source_path", line 1>):  1               0 RETURN_GENERATOR
                  1 POP_TOP
                  2 RESUME               (0)

  2               3 LOAD_GLOBAL          (0, StopIteration)
                  4 PUSH_NULL
                  5 LOAD_CONST           ("spam")
                  6 CALL                 (1)
                  7 LOAD_GLOBAL          (1, StopAsyncIteration)
                  8 PUSH_NULL
                  9 LOAD_CONST           ("ham")
                 10 CALL                 (1)
                 11 BUILD_TUPLE          (2)
                 12 GET_ITER
            >>   13 FOR_ITER             (49)
                 14 STORE_FAST           (0, stop_exc)

  3              15 LOAD_GLOBAL          (2, self)
                 16 LOAD_ATTR            (7, subTest, method=true)
                 17 LOAD_GLOBAL          (4, type)
                 18 PUSH_NULL
                 19 LOAD_FAST            (0, stop_exc)
                 20 CALL                 (1)
                 21 LOAD_CONST           (("type"))
                 22 CALL_KW              (1)
                 23 COPY                 (1)
                 24 LOAD_SPECIAL         (__exit__)
                 25 SWAP                 (2)
                 26 LOAD_SPECIAL         (__enter__)
                 27 PUSH_NULL
                 28 CALL                 (0)
                 29 POP_TOP

  5              30 LOAD_GLOBAL          (5, egg)
                 31 PUSH_NULL
                 32 CALL                 (0)
                 33 COPY                 (1)
                 34 LOAD_SPECIAL         (__aexit__)
                 35 SWAP                 (2)
                 36 LOAD_SPECIAL         (__aenter__)
                 37 PUSH_NULL
                 38 CALL                 (0)
                 39 GET_AWAITABLE        (1)
                 40 LOAD_CONST           (None)
            >>   41 SEND                 (45)
                 42 YIELD_VALUE          (1)
                 43 RESUME               (3)
                 44 JUMP_BACKWARD_NO_INTERRUPT(41)
            >>   45 END_SEND
                 46 POP_TOP

  6              47 LOAD_FAST            (0, stop_exc)
                 48 RAISE_VARARGS        (Raise)

  3         >>   49 END_FOR
                 50 POP_ITER
                 51 LOAD_CONST           (None)
                 52 RETURN_VALUE

  5              53 CLEANUP_THROW
                 54 JUMP_BACKWARD_NO_INTERRUPT(45)
                 55 PUSH_NULL
                 56 LOAD_CONST           (None)
                 57 LOAD_CONST           (None)
                 58 LOAD_CONST           (None)
                 59 CALL                 (3)
                 60 GET_AWAITABLE        (2)
                 61 LOAD_CONST           (None)
            >>   62 SEND                 (67)
                 63 YIELD_VALUE          (1)
                 64 RESUME               (3)
                 65 JUMP_BACKWARD_NO_INTERRUPT(62)
                 66 CLEANUP_THROW
            >>   67 END_SEND
                 68 POP_TOP
                 69 JUMP_FORWARD         (92)
                 70 PUSH_EXC_INFO
                 71 WITH_EXCEPT_START
                 72 GET_AWAITABLE        (2)
                 73 LOAD_CONST           (None)
            >>   74 SEND                 (79)
                 75 YIELD_VALUE          (1)
                 76 RESUME               (3)
                 77 JUMP_BACKWARD_NO_INTERRUPT(74)
                 78 CLEANUP_THROW
            >>   79 END_SEND
                 80 TO_BOOL
                 81 POP_JUMP_IF_TRUE     (84)
                 82 NOT_TAKEN
                 83 RERAISE              (2)
            >>   84 POP_TOP
                 85 POP_EXCEPT
                 86 POP_TOP
                 87 POP_TOP
                 88 JUMP_FORWARD         (92)
                 89 COPY                 (3)
                 90 POP_EXCEPT
                 91 RERAISE              (1)
            >>   92 JUMP_FORWARD         (119)
                 93 PUSH_EXC_INFO

  7              94 LOAD_GLOBAL          (6, Exception)
                 95 CHECK_EXC_MATCH
                 96 POP_JUMP_IF_FALSE    (115)
                 97 NOT_TAKEN
                 98 STORE_FAST           (1, ex)

  8              99 LOAD_GLOBAL          (2, self)
                100 LOAD_ATTR            (15, assertIs, method=true)
                101 LOAD_FAST            (1, ex)
                102 LOAD_FAST            (0, stop_exc)
                103 CALL                 (2)
                104 POP_TOP
                105 JUMP_BACKWARD_NO_INTERRUPT(110)
                106 LOAD_CONST           (None)
                107 STORE_FAST           (1, ex)
                108 DELETE_FAST          (1, ex)
                109 RAISE_VARARGS        (ReraiseFromStack)
            >>  110 POP_EXCEPT
                111 LOAD_CONST           (None)
                112 STORE_FAST           (1, ex)
                113 DELETE_FAST          (1, ex)
                114 JUMP_BACKWARD_NO_INTERRUPT(127)
            >>  115 RAISE_VARARGS        (ReraiseFromStack)
                116 COPY                 (3)
                117 POP_EXCEPT
                118 RAISE_VARARGS        (ReraiseFromStack)

 10         >>  119 LOAD_GLOBAL          (2, self)
                120 LOAD_ATTR            (17, fail, method=true)
                121 LOAD_FAST_BORROW     (0, stop_exc)
                122 FORMAT_SIMPLE
                123 LOAD_CONST           (" was suppressed")
                124 BUILD_STRING         (2)
                125 CALL                 (1)
                126 POP_TOP

  3         >>  127 PUSH_NULL
                128 LOAD_CONST           (None)
                129 LOAD_CONST           (None)
                130 LOAD_CONST           (None)
                131 CALL                 (3)
                132 POP_TOP
                133 JUMP_FORWARD         (148)
                134 PUSH_EXC_INFO
                135 WITH_EXCEPT_START
                136 TO_BOOL
                137 POP_JUMP_IF_TRUE     (140)
                138 NOT_TAKEN
                139 RERAISE              (2)
            >>  140 POP_TOP
                141 POP_EXCEPT
                142 POP_TOP
                143 POP_TOP
                144 JUMP_FORWARD         (148)
                145 COPY                 (3)
                146 POP_EXCEPT
                147 RERAISE              (1)
            >>  148 JUMP_BACKWARD        (13)

              2 MAKE_FUNCTION
              3 STORE_NAME           (0, test)
              4 LOAD_CONST           (None)
              5 RETURN_VALUE
